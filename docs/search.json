{
  "articles": [
    {
      "path": "about.html",
      "title": "About this site",
      "description": "Some additional details about the website",
      "author": [],
      "contents": "\r\n\r\n\r\n\r\n",
      "last_modified": "2024-06-14T00:02:32-04:00"
    },
    {
      "path": "index.html",
      "title": "Weekly Walmart Sales Analysis",
      "description": "Utilizing SQL, Python, and R to analyze Walmart Sales.\n",
      "author": [],
      "contents": "\r\nThis project focuses on analyzing raw data from this dataset, which tracks the weekly sales of 45 Walmart stores over 2 years! It also tracks external factors like whether the week contained a holiday, the CPI, and the unemployment rate of the region.\r\nFirst, the data is cleaned using pandas as we want to make sure that this data is easy to deal with. The primary goal of cleaning is to standardize the data by rounding values and removing missing values.\r\n\r\n\r\nShow Python code\r\n#import \r\nimport pandas as pd\r\ndf = pd.read_csv('Walmart_sales.csv', parse_dates=['Date'], dayfirst=False)\r\n\r\n#sort by store number and then date\r\ndf.sort_values(by=['Store', 'Date'])\r\n\r\n#standarize dates to mm-dd-yyyy\r\ndf['Date'] = pd.to_datetime(df['Date'], format='%d-%m-%Y').dt.strftime('%m-%d-%Y')\r\n\r\n#rounding data \r\ndf.round({'Weekly_Sales':2, 'Temperature':0, 'Fuel_Price':2, 'CPI':3, 'Unemployment':3})\r\n\r\n#removing missing values\r\ndf.dropna\r\n\r\n#create cleaned csv\r\ndf.to_csv('./WalmartSalesClean.csv')\r\n\r\nAfter cleaning, the data appears like so:\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nLet’s answer a few questions about the data. We’ll be using SQL to clean and manipulate the data.\r\nWhich holidays affect weekly sales the most?\r\nHolidays are notorious for driving up sales as Walmart often runs promotional markdown events to incentivize purchases!\r\n\r\n\r\n\r\n\r\nThe (repeating) holidays that appear in this data are:\r\nSuper Bowl (Feb 9th)\r\nLabor Day (Sept 10th)1\r\nThanksgiving (Nov 26th)\r\nChristmas and Hanukkah (Dec 31th)\r\nFirst, let’s look at which days had the highest profit:\r\n\r\n\r\nShow SQL code\r\nALTER TABLE WalmartSalesClean\r\nALTER COLUMN Holiday_Flag Int;\r\n\r\n#filtering for holiday flags and sorting \r\nSELECT Date, SUM(CAST(Weekly_Sales AS FLOAT)) AS Weekly_Sales\r\nFROM WalmartSalesClean \r\nWHERE Holiday_Flag='1'\r\nGROUP BY Date\r\nORDER BY Weekly_Sales DESC;\r\n\r\n\r\n\r\n\r\n\r\nIt seems like Thanksgiving (for all stores) consistently ranks the highest amongst all the holidays!\r\nBut, this isn’t specific enough for me. Let’s find the total sales per holiday so that we can have a more accurate comparison!\r\n\r\n\r\nShow SQL code\r\nSELECT \r\nCASE \r\nWHEN Holiday = 02 THEN 'Super Bowl' --changing months to holiday names\r\nWHEN Holiday = 09 THEN 'Labor Day'\r\nWHEN Holiday = 11 THEN 'Thanksgiving'\r\nWHEN Holiday = 12 THEN 'Christmas'\r\nEND AS Holiday, SUM(Weekly_Sales) AS Weekly_Sales\r\n    FROM (  --subquery to have two GROUP BY statements \r\n    SELECT SUBSTRING (DATE, 1, 2) AS Holiday, SUM(CAST(Weekly_Sales AS FLOAT)) AS Weekly_Sales \r\n    FROM WalmartSalesClean \r\n    WHERE Holiday_Flag='1'\r\n    GROUP BY Date\r\n    ) AS temptable \r\nGROUP BY Holiday --Summarizing and reordering data \r\nORDER BY Weekly_Sales DESC\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nDespite Thanksgiving dominating the upper echelons of highest individual store profit, it seems like people spend the most on the Super Bowl! Perhaps, it boils down to the cultural significance of Thanksgiving, where it “symbolizes intercultural peace, America’s opportunity for newcomers, and the sanctity of home and family”.2 I’m more of the opinion that it’s an opportunity to invite all your friends and family and spend the entire day cooking – that means food costs can balloon quickly!\r\nWhich stores have the lowest and highest unemployment rate?\r\n\r\n\r\nShow SQL code\r\n-- highest unemployment rate \r\nSELECT TOP 6 Store, avg(CAST(Unemployment AS decimal)) AS Unemployment, avg(CAST(Weekly_Sales AS decimal)) AS Weekly_Sales\r\nFROM WalmartSalesClean\r\nGROUP BY Store\r\nORDER BY Unemployment desc, Weekly_Sales desc -- need to use weekly sales as a parameter as stores may have the same unemployment rate\r\n\r\n\r\n\r\nTable 1: Highest Unemployment\r\n\r\n\r\nStore\r\n\r\n\r\nUnemployment\r\n\r\n\r\nWeekly_Sales\r\n\r\n\r\n12\r\n\r\n\r\n13.116483\r\n\r\n\r\n1009001.6\r\n\r\n\r\n28\r\n\r\n\r\n13.116483\r\n\r\n\r\n1323522.2\r\n\r\n\r\n38\r\n\r\n\r\n13.116483\r\n\r\n\r\n385731.7\r\n\r\n\r\n34\r\n\r\n\r\n9.934804\r\n\r\n\r\n966781.6\r\n\r\n\r\n43\r\n\r\n\r\n9.934804\r\n\r\n\r\n633324.7\r\n\r\n\r\n29\r\n\r\n\r\n9.806385\r\n\r\n\r\n539451.4\r\n\r\n\r\n\r\n\r\nShow SQL code\r\n-- lowest unemployment rate\r\nSELECT TOP 6 Store, avg(CAST(Unemployment AS decimal)) AS Unemployment, avg(CAST(Weekly_Sales AS decimal)) AS Weekly_Sales\r\nFROM WalmartSalesClean\r\nGROUP BY Store\r\nORDER BY Unemployment, Weekly_Sales desc\r\n\r\n\r\n\r\nTable 2: Lowest Unemployment\r\n\r\n\r\nStore\r\n\r\n\r\nUnemployment\r\n\r\n\r\nWeekly_Sales\r\n\r\n\r\n23\r\n\r\n\r\n4.796014\r\n\r\n\r\n1389864.5\r\n\r\n\r\n40\r\n\r\n\r\n4.796014\r\n\r\n\r\n964128.0\r\n\r\n\r\n4\r\n\r\n\r\n5.964692\r\n\r\n\r\n2094713.0\r\n\r\n\r\n8\r\n\r\n\r\n6.091846\r\n\r\n\r\n908749.5\r\n\r\n\r\n9\r\n\r\n\r\n6.099881\r\n\r\n\r\n543980.6\r\n\r\n\r\n5\r\n\r\n\r\n6.295406\r\n\r\n\r\n318011.8\r\n\r\n\r\nInterestingly, it doesn’t seem like there’s really a correlation between high unemployment and low weekly sales. I’d expect that places with higher unemployment meant that consumers had less disposable income to spend at Walmart. But, Walmart is known for having super cheap products and consumers could’ve primarily bought inelastic goods and other necessities.\r\nIt could also be that Walmart’s penetration pricing worked too well. Walmart is notorious for significantly impacting the local economy of the neighborhood, positively and negatively. On one hand, low prices means that consumers can afford more things in a one-stop location and stores near the Walmart get more business due to the influx of foot traffic. On the other, Walmart is known for hiring many workers and paying minimum wage, as well as displacing small businesses due to their low prices (and subsequently, small profit margins) with their penetrating pricing. These margins are things that only large corporations can withstand, while small businesses simply can’t afford to compete.\r\nThe positive and negative effects can differ depending on the neighborhood that Walmart enters, with this data being a good example of the impacts that Walmart can have.\r\nPearson’s correlation\r\n\r\nrawdata AS (\r\nSELECT Unemployment AS x, Weekly_Sales AS y, Unemployment*Weekly_Sales AS xy, Unemployment*Unemployment AS xsquared, Weekly_Sales*Weekly_Sales AS ysquared  \r\nFROM corrdata\r\n),\r\n\r\npdata AS (\r\nSELECT SUM(x) AS sumx, SUM(y) AS sumy, SUM(xy) as sumxy, SUM(xsquared) as sumx2, SUM(ysquared) as sumy2, COUNT(x) as n\r\nFROM rawdata\r\n)\r\n\r\nSELECT (n*sumxy - sumx * sumy) / (sqrt((n*sumx2 - sumx*sumx)*(n*sumy2 - sumy*sumy))) AS \"Pearson's Correlation\"\r\nFROM pdata\r\n\r\nIs there any correlation between CPI and Weekly Sales? How does the correlation differ when the Holiday Flag is 0 versus when the Holiday Flag is 1?\r\n\r\n\r\n\r\nWITH rdata AS (\r\nSELECT CAST(ROUND(CPI, 0) AS INT) AS CPI, CAST(Weekly_Sales AS decimal) AS Weekly_Sales\r\nFROM WalmartSalesClean\r\nWHERE Holiday_Flag = 0\r\n),\r\n\r\ncorrdata AS(\r\nSELECT CPI, AVG(Weekly_Sales) AS Weekly_Sales\r\nFROM rdata\r\nGROUP BY CPI\r\n/*ORDER BY CPI ASC*/\r\n),\r\n\r\n\r\nrawdata AS (\r\nSELECT CPI AS x, Weekly_Sales AS y, CPI*Weekly_Sales AS xy, CPI*CPI AS xsquared, Weekly_Sales*Weekly_Sales AS ysquared  \r\nFROM corrdata\r\n),\r\n\r\npdata AS (\r\nSELECT SUM(x) AS sumx, SUM(y) AS sumy, SUM(xy) as sumxy, SUM(xsquared) as sumx2, SUM(ysquared) as sumy2, COUNT(x) as n\r\nFROM rawdata\r\n)\r\n\r\nSELECT (n*sumxy - sumx * sumy) / (sqrt((n*sumx2 - sumx*sumx)*(n*sumy2 - sumy*sumy))) AS \"Pearson's Correlation\"\r\nFROM pdata\r\n\r\n\r\nhttps://docs.google.com/spreadsheets/d/1JNzGqUo9HEn5WOKftEgcm94JddOK6G3_QW-UI4sFNUY/edit#gid=0\r\n\r\nThis data is American.↩︎\r\nhttps://www.britannica.com/topic/Thanksgiving-Day↩︎\r\n",
      "last_modified": "2024-06-14T00:02:32-04:00"
    }
  ],
  "collections": []
}
